
import { div } from './helpers';

//
// WorldMap
//
function WorldMap(world, level) {
  this.el = div(world.el, 'WorldMap');

  this.types = {
    0: 'Empty',
    1: 'Wall',
    2: 'Player',
    3: 'Friendly',
    4: 'Food',
    5: 'Exit',
    6: 'Gold',
    7: 'Fire',
    8: 'Baddie',
    9: 'Friendly',
  };
  this.icons = {
    0: '⬜️',
    1: '🌳',
    2: '🐕',
    3: '🐑',
    4: '🍖',
    5: '⛩',
    6: '💰',
    7: '🔥',
    8: '🐍',
    9: '🐈',
  };
  this.acceptableTiles = [0];

  // jscs:disable requireSpaceAfterComma
  // jscs:disable maximumLineLength
  this.fields = [
    { name: 'Starter', chunkSize: 75, field: [
      [1,1,1,1,1,1,1],
      [1,2,1,6,0,0,1],
      [1,0,0,1,1,0,5],
      [1,0,1,0,0,0,1],
      [1,4,0,9,1,7,1],
      [1,1,1,1,1,1,1],
    ], },
    { name: 'A Baddie Appears!', chunkSize: 75, field: [
      [1,1,1,1,1,1,1,1],
      [1,2,1,6,8,0,0,1],
      [1,0,9,1,1,1,0,5],
      [1,0,1,4,0,0,0,1],
      [1,0,1,1,0,1,0,1],
      [1,4,0,3,0,1,7,1],
      [1,1,1,1,1,1,1,1],
    ], },
    { name: 'EMMA', chunkSize: 47, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1],
      [1,0,1,1,1,0,1,0,4,0,1,0,1,0,4,0,1,0,0,0,1,0,0,0,1],
      [1,0,1,0,0,0,1,1,0,1,1,0,1,1,0,1,1,0,0,1,0,1,0,0,1],
      [1,0,1,7,3,0,1,0,7,0,1,8,1,0,7,0,1,0,0,1,7,1,0,0,5],
      [1,0,1,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,1,0,0,0,1,0,1],
      [1,0,1,1,1,0,1,0,3,0,1,0,1,0,3,0,1,0,1,0,3,0,1,0,1],
      [1,4,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    ], },
    { name: 'Open Field', chunkSize: 47, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,5],
      [1,0,7,1,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,1,3,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,3,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    ], },
    { name: 'Maze', chunkSize: 52, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,1,3,0,0,6,7,0,1,3,0,0,0,0,0,0,3,1,0,0,0,0,1],
      [1,0,1,0,1,1,1,1,0,0,0,1,0,1,1,1,1,0,1,0,1,1,0,1],
      [1,0,1,4,0,0,0,1,1,1,1,1,0,1,0,0,0,0,4,0,0,1,0,1],
      [1,4,1,1,1,0,1,1,0,0,0,4,0,1,0,1,1,1,1,1,1,1,0,1],
      [1,0,0,0,1,0,0,0,0,7,1,1,1,1,0,1,0,1,0,1,3,1,3,1],
      [1,3,1,0,1,0,1,0,3,1,6,0,1,0,0,1,0,1,0,4,0,1,6,1],
      [1,0,1,0,7,0,1,1,1,1,1,0,1,0,1,1,0,0,0,1,0,1,1,1],
      [1,6,1,0,0,0,0,3,0,0,0,0,1,0,3,0,0,7,0,1,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,1],
    ], },
    { name: 'Bigger Maze', chunkSize: 47, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,6,1,3,0,3,6,1,6,1,3,0,0,3,0,0,0,3,1,0,0,0,3,0,1,8,5],
      [1,0,1,0,1,1,1,1,0,0,0,1,0,1,1,1,1,0,1,0,1,1,0,1,1,0,1],
      [1,0,1,4,0,0,0,7,1,1,1,1,0,1,0,0,0,0,4,0,0,1,0,7,1,0,1],
      [1,4,1,1,1,0,1,1,0,0,0,4,0,1,0,1,1,1,1,1,1,4,0,6,1,0,1],
      [1,0,0,0,1,0,0,0,0,1,1,1,1,7,0,1,6,1,0,1,3,1,3,1,1,0,1],
      [1,3,1,0,1,0,1,0,3,1,6,0,1,0,0,1,0,1,0,4,0,1,0,0,0,0,1],
      [1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,0,0,1,0,1,1,1,1,7,1],
      [1,0,1,0,0,0,0,3,0,3,0,0,1,0,3,7,0,1,0,1,0,1,3,6,1,4,1],
      [1,0,7,0,0,1,0,0,7,0,0,0,1,0,0,0,0,1,0,1,0,0,0,7,1,0,1],
      [1,2,1,0,1,1,1,1,1,0,7,0,1,0,1,1,0,1,0,1,1,1,0,1,1,0,1],
      [1,0,1,0,0,0,4,0,1,8,4,0,1,0,4,1,0,3,0,0,6,1,0,0,0,3,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    ], },
    { name: 'Pacman', chunkSize: 45, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,6,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,6,1],
      [1,0,1,1,1,0,1,1,1,0,7,0,1,1,1,0,1,1,1,0,1],
      [1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1],
      [1,0,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,0,1],
      [1,0,0,0,0,0,1,4,0,0,1,0,0,4,1,0,0,0,0,0,1],
      [1,1,1,1,1,0,1,1,1,0,7,0,1,1,1,0,1,1,1,1,1],
      [0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0],
      [1,1,1,1,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1,1],
      [1,2,0,0,0,0,0,0,1,3,8,3,1,0,0,0,0,0,0,0,5],
      [1,0,0,0,0,0,1,0,1,3,8,3,1,0,1,0,0,0,0,0,1],
      [1,1,1,1,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1,1],
      [0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,0,0,0],
      [1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1],
      [1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,1,1,0,1,1,1,0,7,0,1,1,1,0,1,1,0,0,1],
      [1,0,0,4,1,3,0,0,0,0,0,0,0,0,0,3,1,4,0,0,1],
      [1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1],
      [1,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1],
      [1,0,1,1,1,1,1,1,1,0,7,0,1,1,1,1,1,1,1,0,1],
      [1,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
    ], },
    { name: 'BIG Field', chunkSize: 40, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,1],
      [1,0,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,1,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,0,0,0,1],
      [1,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,1,1,1],
    ], },
    { name: 'BIGGEST Field', chunkSize: 50, field: [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,1],
      [1,0,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,7,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,1,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,0,0,0,1],
      [1,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,1,1,1],
    ], },
  ];

  // jscs:enable requireSpaceAfterComma
  // jscs:enable maximumLineLength

  this.levels = this.fields.length;
  this.setLevel(level);

  this.iconsByType = {};
  Object.keys(this.types).forEach((key) => {
    this.iconsByType[this.types[key]] = this.icons[key];
  });

  this.typesMap = new Array(this.height);
  this.iconsMap = new Array(this.height);
  this.field.forEach((row, r) => {
    this.typesMap[r] = [];
    this.iconsMap[r] = [];
    row.forEach((col, c) => {
      this.typesMap[r][c] = this.types[col];
      this.iconsMap[r][c] = this.icons[col];
    });
  });
};

WorldMap.prototype.setLevel = function (level) {
  this.field = this.fields[level - 1].field;
  this.chunkSize = this.fields[level - 1].chunkSize;
  this.name = this.fields[level - 1].name;
  this.width = this.field[0].length;
  this.height = this.field.length;
};

WorldMap.prototype.getIconByType = function (type) {
  return this.iconsByType[type];
};

module.exports = WorldMap;
